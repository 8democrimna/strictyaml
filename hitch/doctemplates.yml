documents:
  rst: |
    {{ story.name }}
    {{ "-" * story.name|length }}

    {{ story['description'] }}

    {% for filename, contents in story['preconditions'].get('files', {}).items() %}
    
    {{ filename }}:

    .. code-block:: yaml
    
    {{ contents|indent(2, true) }}
    {% endfor %}

    {%- for step in story.steps %}
    {{ step }}
    {% endfor %}

    Page automatically generated by hitchdoc from:
      hitch/{{ story.filename }}
steps:
  code: |
    .. code-block:: python

        {{ command|trim|indent(4) }}
  true: |
    {{ why }}

    .. code-block:: python

        {{ command|trim|indent(4) }}
        >>> True
  exception: |
    {{ why }}

    .. code-block:: python

        {{ command|trim|indent(4) }}
        >>> EXCEPTION RAISED:
          {{ exception|indent(6, false) }}
  filename contains: |
    After which, {{ filename }} will contain:

    {{ contents }}
